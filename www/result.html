<!DOCTYPE html>
<html>
<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<title>WOOHO | Result</title>
	<link rel="icon" href="icon.png">
	<link rel="stylesheet" href="framework7/css/framework7.min.css">
	<link rel="stylesheet" href="css/icons.css">
	<style>
		#app .result .card{
			position: absolute;
			bottom: 0;
			left: 18px;
			width: 400px;
			transition: 1s;
		}
		
		.card .list .row{
			background: none;
		}
		
		#app .result .card.hide{
			bottom: 0 !important;
		}
	</style>
</head>
<body>
	<div id="app">
		<div class="views">
			<div class="view view-main">
				<div class="page result" style="background-color:#00FF00">
					<a id="start">START</a>
					<span style="position:absolute; bottom:880px;">**************************** T O P ***** L I M I T ****************************</span>
					<span style="position:absolute; bottom:200px;">**************************** L O W ***** L I M I T ****************************</span>
					<div class="card hide card1" name="1">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card2" name="2">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card3" name="3">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card4" name="4">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card5" name="5">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card6" name="6">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card7" name="7">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card8" name="8">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card9" name="9">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card10" name="10">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="card hide card11" name="11">
						<div class="card-content">
							<div class="list links-list">
								<ul>
									<li>
										<a href="#" class="row">
											<div class="col-20"><img src="img/state/kualalumpur.png" width="24" height="24"/></div>
											<div class="col-55"></div>
											<div class="col-25"></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="framework7/js/framework7.min.js"></script>
	<script src="js/jquery-3.4.1.min.js"></script>
	<script type="text/javascript">
		var apps = 	new Framework7({
						root: '#app',
						id: 'com.wkv.wooho',
						name: 'Wooho',
						theme: 'md',
						version: "1.0.1",
						rtl: false,
						language: "en-US"
					});
		
		function checkCard(){
		
		}
		  
		function changePosition(cardNum, seq){
			var position = [800, 740, 680, 620, 560, 500, 440, 380, 320, 260]
			
			$('.card.card'+cardNum).css('bottom', position[seq-1]);
		}
		
		$(document).ready(function(){
			$('#start').on('click', function(){
				window.setInterval(function(){
					var postAjaxData = "ACT=" + encodeURIComponent('pnw_result');
							  
					$.ajax({
						type: 'POST',
						url: 'http://wooho.fun/',
						data: postAjaxData,
						success: function(str){
							var result = JSON.parse(str);
							var loopCount = ((result.length > 10) ? 10 : result.length),
								newChampion = [];
							$('.card.show').addClass('uncheck');
							
							for(var i=0; i<loopCount; i++){
								var showCard = $('.card.show').length,
									match = false;
								
								for(var j=0; j<showCard; j++){
									var curCard = $('.card.show:eq('+j+')');
									
									if(curCard.data('pnwid')==result[i].playnwin){
										curCard.removeClass('uncheck');
										curCard.find('.col-25').text(result[i].maxScore);
										changePosition((curCard.attr('name')), (i+1));
										match = true;
										break;
									}
								}
								
								if(!match){
									result[i]['place'] = i;
									newChampion.push(result[i]);
								}
							}
							$('.card.uncheck').removeData('usr');
							$('.card.uncheck').removeClass('show');
							$('.card.uncheck').addClass('hide');
							
							for(var i=0; i<newChampion.length; i++){
								var curCard = $('.card.hide:eq('+i+')');
								
								curCard.data('pnwid', newChampion[i].playnwin);
								curCard.addClass('show');
								curCard.addClass('checked');
								curCard.find('.col-20').find('img').attr('src', ('img/state/' + newChampion[i].user_state + '.png'));
								curCard.find('.col-55').text(newChampion[i].user_id);
								curCard.find('.col-25').text(newChampion[i].maxScore);
								changePosition((curCard.attr('name')), (newChampion[i]['place']+1));
							}
							$('.card.checked').removeClass('hide');
						}
					});
				}, 2000);
			});
		});
	</script>
</body>
</html>